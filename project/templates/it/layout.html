<!DOCTYPE html>

<html {% block lang %}{% endblock %}>
    <!-- HEAD -->
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="initial-scale=1, width=device-width">

        <!-- CSS -->
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous" />
        <link href="../../static/css/layout-css/style.css" rel="stylesheet" />
        {% block css %}{% endblock %}
        <link href="../../static/css/layout-css/main-rules.css" rel="stylesheet" />
        <link href="../../static/css/layout-css/resize.css" rel="stylesheet" />

        <!-- SCRIPTS -->
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.10.4/gsap.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.10.4/ScrollTrigger.min.js"></script>
        {% block script %}{% endblock %}

        
        <!-- Tab Title -->
        <title>Simone Molino - {% block title %}{% endblock %}</title>
    </head>

    <!-- BODY -->
    <body>
         <!-- Loading Spinner -->    
        <div class="spinner__wrapper it" id="spinner__wrapper">
             <div class="spinner-border" role="status">
                <span class="visually-hidden">Sto preparando le cose per te...</span>
            </div>
        </div>

        <!-- MOBILE MENU STARTS -->
        <div class="navbar_fullscreen">
            <div class="flex-container justify-end">
                <!-- DARK THEME BUTTON STARTS (DISPLAY ONLY IN MOBILE MENU) -->
                <div class="switch-theme-wrapper display-hidden">
                    <div class="switch_theme_container-mobile flex-container align-center padding-right-s" role="group">
                        <img src="{{ url_for('static', filename='imgs/layout-imgs/moon-dark-theme.png') }}" alt="moon-dark-theme.png" height="25" width="35" class="dark-moon-mobile display-hidden"/>
                        <img src="{{ url_for('static', filename='imgs/layout-imgs/moon-light-theme.png') }}" alt="moon-dark-theme.png" height="25" width="35" class="light-moon-mobile"/>
                        <label class="switch_theme margin-left-xs" role="button">
                            <input type="checkbox" class="display-hidden" id="switch-theme-mobile"/>
                            <span class="slider round"></span>
                        </label>
                    </div>
                </div>
                <!-- MENU BUTTON STARTS -->
                <div class="menu__button">
                    <span></span>
                    <span></span>
                </div> <!-- MENU BUTTON ENDS -->
            </div>

            <!-- "MENU HIDDEN NAV" -->
            <div class="menu__wrapper">
                <ul class="menu__list">
                    <li class="menu__item"><a href="/it/home" class="menu__link">Home</a></li>
                    <li class="menu__item"><a href="/it/about-me" class="menu__link">Su di Me</a></li>                        
                    <li class="menu__item"><a href="/it/projects" class="menu__link">Progetti</a></li>
                    <li class="menu__item"><a href="/it/skills" class="menu__link">Abilità</a></li>                
                    <li class="menu__item"><a href="/it/contacts" class="menu__link">Contatti</a></li>
                </ul>  
            </div> <!-- End "MENU HIDDEN NAV"-->           
        </div> <!-- MOBILE MENU ENDS-->

        <!-- Header -->
        <header class="header flex-container justify-end align-center padding-all-xs width-100" id="header" role="banner">        
            <!-- Top nav bar: change pages -->
            <div class="header_nav flex-container align-center">                
                <nav role="navigation" id="top-nav">
                    <!-- Nav Items -->
                    <ul class="nav_items flex-container align-center margin-top-xs padding-right-s">
                        <li class="item"><a href="/it/about-me">Su di Me</a></li>                        
                        <li class="item"><a href="/it/projects">Progetti</a></li>
                        <li class="item"><a href="/it/skills">Abilità</a></li>                
                        <li class="item"><a href="/it/contacts">Contatti</a></li>
                        <li class="item-disabled"><a role="/blog" aria-disabled="true">Blog (in arrivo...)</a></li>
                    </ul>                    
                </nav>                                              
            </div>
            <!-- Dark Theme Button -->
            <div class="switch_theme_container flex-container align-center padding-right-s" role="group">
                <img src="{{ url_for('static', filename='imgs/layout-imgs/moon-dark-theme.png') }}" alt="moon-dark-theme.png" height="25" width="35" class="dark-moon display-hidden"/>
                <img src="{{ url_for('static', filename='imgs/layout-imgs/moon-light-theme.png') }}" alt="moon-dark-theme.png" height="25" width="35" class="light-moon"/>
                <label class="switch_theme margin-left-xs" role="button">                
                    <input type="checkbox" class="display-hidden" id="switch-theme">
                    <span class="slider round"></span>
                </label>  
            </div>                        
        </header>
        <!-- IMG: click = top page -->        
        <div class="nav_img display-none-lg" id="nav_img">
            <a href="/it/home"><img src="{{ url_for('static', filename='imgs/layout-imgs/nav-img.png') }}" alt="nav-img.png" width="150" height="150" /></a>
        </div>
        {% block main %}{% endblock %}
        <!-- FOOTER -->
        <footer class="footer flex-container vertical-row justify-center align-center width-100" id="footer" role="footer">
            <!-- Credits -->
            <p class="padding-top-s">Progettato e Costruito da Simone Molino &copy; 2022</p>
            {% block language_change %}{% endblock %}
            <!-- Social Links -->
            <div class="social_container padding-bottom-m" id="social_container" role="link">                
                <a href="https://www.linkedin.com/in/simone-molino-884486194/" target="_blank"><img src="{{ url_for('static', filename='imgs/layout-imgs/lin-ico.png') }}" alt="lin-ico.png" height="25" width="25" /></a>
                <a href="https://www.instagram.com/rhokthar/" target="_blank"><img src="{{ url_for('static', filename='imgs/layout-imgs/insta-ico.png') }}" alt="insta-ico.png" height="30" width="30" /></a>
                <a href="https://github.com/Rhokthar" target="_blank"><img src="{{ url_for('static', filename='imgs/layout-imgs/git-ico.png') }}" alt="git-ico.png" height="25" width="25" /></a>
            </div>            
            <!-- TODO: stat recorder -->            
        </footer>
        <!-- Scripts -->
        <script>
            
            localStorage.setItem("data-lang", "it");

            // Spinner scripts
            let spinner = document.querySelector(".spinner__wrapper");
            let body = document.querySelector("body");

            window.addEventListener("load", function() {
                spinner.classList.add("hidden");
                body.style.overflow = "visible";
            
            });
            
            if (history.scrollRestoration) 
            {
                history.scrollRestoration = 'manual';
            } 
            else 
            {
                window.onbeforeunload = function () {
                    window.scrollTo(0, 0);
                }
            }

            // Script for the FullScreen Nav Menu
            document.querySelector(".menu__button").onclick = function(e) {
                var menu = document.querySelector(".menu__wrapper");
                var button = document.querySelector(".menu__button");
                var themeButton = document.querySelector(".switch-theme-wrapper");
                
                menu.classList.toggle("active");
                button.classList.toggle("active");
                themeButton.classList.toggle("display-hidden");
                e.preventDefault();
            }

            // Check if Elements are in the viewport
            function isInViewport(element) 
            {
                // Get position of the elements
                const rect = element.getBoundingClientRect();
                // Return true if is in viewport, false otherwise
                // In viewport if its top and left position are >= 0 and its bottom and right position <= window lenght
                return (
                    rect.top >= 0 &&
                    rect.left >= 0 &&
                    rect.bottom <= (window.innerHeight || document.documentElement.clientHeight) &&
                    rect.right <= (window.innerWidth || document.documentElement.clientWidth)
                );
            }

            // SWITCH THEME STARTS
            var themeValue = localStorage.getItem("data-theme");

            let themeSwitch = document.getElementById("switch-theme");
            let themeSwitchMobile = document.getElementById("switch-theme-mobile");

            let lightMoon = document.querySelector(".light-moon");
            let darkMoon = document.querySelector(".dark-moon");
            let lightMoonMobile = document.querySelector(".light-moon-mobile");
            let darkMoonMobile = document.querySelector(".dark-moon-mobile");

            document.documentElement.setAttribute("data-theme", themeValue);

            if (themeValue === "dark")
            {
                themeSwitch.checked = true;
                themeSwitchMobile.checked = true;
                
                darkMoon.classList.remove("display-hidden");
                lightMoon.classList.add("display-hidden");

                darkMoonMobile.classList.remove("display-hidden");
                lightMoonMobile.classList.add("display-hidden");
            }
            else
            {
                themeSwitch.checked = false;
                themeSwitchMobile.checked = false;

                darkMoon.classList.add("display-hidden");
                lightMoon.classList.remove("display-hidden");

                darkMoonMobile.classList.add("display-hidden");
                lightMoonMobile.classList.remove("display-hidden");
            }

            let SetDarkTheme = () => {
                document.documentElement.setAttribute("data-theme", "dark");
                localStorage.setItem("data-theme", "dark");
            }
            let SetLightTheme = () => {
                document.documentElement.setAttribute("data-theme", "light");
                localStorage.setItem("data-theme", "light");
            }

            themeSwitch.addEventListener("change", () => {
                let themeStatus = localStorage.getItem("data-theme");
                if (themeStatus === "light")
                {
                    if (themeSwitch.checked)
                    {
                        themeSwitchMobile.checked = true;
                    }
                    else
                    {
                        themeSwitchMobile.checked = false;
                    }
                    darkMoon.classList.remove("display-hidden");
                    lightMoon.classList.add("display-hidden");

                    darkMoonMobile.classList.remove("display-hidden");
                    lightMoonMobile.classList.add("display-hidden");
                    SetDarkTheme();
                }
                else
                {
                    if (themeSwitch.checked)
                    {
                        themeSwitchMobile.checked = true;
                    }
                    else
                    {
                        themeSwitchMobile.checked = false;                        
                    }
                    darkMoon.classList.add("display-hidden");
                    lightMoon.classList.remove("display-hidden");

                    darkMoonMobile.classList.add("display-hidden");
                    lightMoonMobile.classList.remove("display-hidden");
                    SetLightTheme();
                }
            });
            themeSwitchMobile.addEventListener("change", () => {
                let themeStatus = localStorage.getItem("data-theme");
                if (themeStatus === "light")
                {
                    if (themeSwitchMobile.checked)
                    {
                        themeSwitch.checked = true;
                    }
                    else
                    {
                        themeSwitch.checked = false;
                    }
                    darkMoon.classList.remove("display-hidden");
                    lightMoon.classList.add("display-hidden");

                    darkMoonMobile.classList.remove("display-hidden");
                    lightMoonMobile.classList.add("display-hidden");
                    SetDarkTheme();
                }
                else
                {
                    if (themeSwitchMobile.checked)
                    {
                        themeSwitch.checked = true;
                    }
                    else
                    {
                        themeSwitch.checked = false;
                    }
                    darkMoon.classList.add("display-hidden");
                    lightMoon.classList.remove("display-hidden");

                    darkMoonMobile.classList.add("display-hidden");
                    lightMoonMobile.classList.remove("display-hidden");
                    SetLightTheme();
                }
            });
            // SWITCH THEME ENDS
        </script>             
    </body>
</html>